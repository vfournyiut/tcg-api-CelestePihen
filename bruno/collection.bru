meta {
  name: TCG Backend API
  type: collection
}

docs {
  # ğŸ® Pokemon-like TCG Backend API

  Collection de requÃªtes pour tester l'API du jeu de cartes Pokemon-like TCG.

  ## ğŸš€ DÃ©marrage rapide

  ### 1. Configuration de l'environnement
  ```bash
  # Installer les dÃ©pendances
  npm install

  # Configurer les variables d'environnement
  cp .env.example .env

  # DÃ©marrer PostgreSQL avec Docker
  npm run db:start

  # Initialiser la base de donnÃ©es
  npm run db:generate
  npm run db:migrate
  npm run db:seed  # Seed avec donnÃ©es de test
  ```

  ### 2. DÃ©marrer le serveur
  ```bash
  npm run dev  # Port 3001 par dÃ©faut
  ```

  ### 3. Tester l'API avec Bruno
  1. Ouvrir "Health Check" pour vÃ©rifier que l'API fonctionne
  2. Utiliser "Sign In (Red)" ou "Sign In (Blue)" pour s'authentifier
  3. Le token JWT est automatiquement sauvegardÃ© dans `{{token}}`
  4. Tester les autres endpoints (Cards, Decks)

  ## ğŸ“ Organisation de la collection

  ### ğŸ” Auth (Authentification)
  - **Sign In (Red)** : Connexion avec red@example.com
  - **Sign In (Blue)** : Connexion avec blue@example.com
  - **Sign Up** : CrÃ©ation de nouveau compte

  ### ğŸƒ Cards (Cartes)
  - **Get All Cards** : RÃ©cupÃ©ration de toutes les cartes Pokemon

  ### ğŸ“š Decks (Decks de cartes)
  - **Create Deck** : CrÃ©er un deck (20 cartes exactement)
  - **Get My Decks** : Voir ses decks
  - **Get Deck by ID** : DÃ©tails d'un deck spÃ©cifique
  - **Update Deck** : Modifier un deck
  - **Delete Deck** : Supprimer un deck

  ### â¤ï¸ Health Check
  - VÃ©rification que le serveur est en ligne

  ## ğŸ”‘ Variables d'environnement

  ### Variables configurables
  - **`{{baseUrl}}`** : URL de base de l'API (default: http://localhost:3001)
    - ConfigurÃ©e dans `environments/local.bru`

  ### Variables automatiques
  - **`{{token}}`** : Token JWT sauvegardÃ© aprÃ¨s sign-in/sign-up
  - **`{{deckId}}`** : ID du deck sauvegardÃ© aprÃ¨s "Get My Decks"

  ## ğŸ‘¥ Utilisateurs de test

  Deux utilisateurs sont crÃ©Ã©s lors du seed :

  | Utilisateur | Email | Mot de passe | Decks |
  |-------------|-------|--------------|-------|
  | Red | red@example.com | password123 | 1 deck (20 cartes) |
  | Blue | blue@example.com | password123 | 1 deck (20 cartes) |

  ## ğŸ”’ Authentification

  ### JWT Bearer Token
  - La plupart des endpoints nÃ©cessitent une authentification
  - Le token est envoyÃ© via le header: `Authorization: Bearer {{token}}`
  - DurÃ©e de validitÃ©: 7 jours

  ### Workflow d'authentification
  1. Utiliser "Sign In" ou "Sign Up"
  2. Le token est automatiquement sauvegardÃ© dans `{{token}}`
  3. Toutes les requÃªtes authentifiÃ©es l'utilisent automatiquement
  4. Pour se dÃ©connecter, supprimer la variable `{{token}}`

  ## ğŸ“– Architecture de l'API

  ### Stack technique
  - **Express.js** : Framework web
  - **TypeScript** : Typage statique
  - **PostgreSQL** : Base de donnÃ©es (via Docker)
  - **Prisma** : ORM
  - **JWT** : Authentification
  - **bcryptjs** : Hash des mots de passe
  - **Docker Compose** : Environnement de dÃ©veloppement

  ### Pattern MVC
  ```
  Routes â†’ Middlewares â†’ Controllers â†’ Prisma â†’ Database
  ```

  - **Routes** (`src/routes/`) : DÃ©finition des endpoints et middlewares
  - **Controllers** (`src/controllers/`) : Logique mÃ©tier
  - **Middlewares** (`src/middlewares/`) : Authentification, validation
  - **Database** : SQLite avec Prisma ORM

  ## ğŸ§ª Tests

  ### Lancer les tests
  ```bash
  npm test              # Mode watch
  npm run test:run      # Une seule fois
  npm run test:ui       # Interface graphique
  npm run test:coverage # Avec couverture
  ```

  ### VÃ©rification des types
  ```bash
  npm run ts:check
  ```

  ## ğŸ“š Documentation supplÃ©mentaire

  - **README principal** : Voir `bruno/README.md`
  - **Auth** : Voir `bruno/Auth/README.md`
  - **Cards** : Voir `bruno/Cards/README.md`
  - **Decks** : Voir `bruno/Decks/README.md`
  - **API Swagger** : http://localhost:3001/api-docs (quand le serveur est dÃ©marrÃ©)

  ## ğŸ› ï¸ Commandes utiles

  ### Docker & Base de donnÃ©es
  ```bash
  npm run db:start      # DÃ©marre PostgreSQL (Docker)
  npm run db:stop       # ArrÃªte PostgreSQL

  npm run db:generate   # GÃ©nÃ¨re le client Prisma
  npm run db:migrate    # Applique les migrations
  npm run db:seed       # Seed la base de donnÃ©es
  npm run db:reset      # Reset + migrations + seed
  npm run db:studio     # Interface graphique Prisma
  ```

  Commandes Docker additionnelles (optionnel):
  ```bash
  docker ps                              # VÃ©rifie le statut
  docker logs but2-tcg-postgres          # Voir les logs
  docker restart but2-tcg-postgres       # RedÃ©marre
  docker volume rm but2-tcg-postgres-data # Supprime donnÃ©es
  ```

  ### Build & Run
  ```bash
  npm run dev           # Mode dÃ©veloppement
  npm run build         # Compile TypeScript
  npm start             # Mode production
  ```

  ## âš ï¸ Notes importantes

  - Un deck doit contenir **exactement 20 cartes**
  - Les cartes peuvent Ãªtre dupliquÃ©es dans un deck
  - Le token JWT expire aprÃ¨s 7 jours
  - Les IDs de cartes sont au format "001", "002", etc.
  - Les decks sont liÃ©s Ã  l'utilisateur connectÃ© (pas de partage)

  ## ğŸ”— Liens utiles

  - **Repository** : (ajouter le lien du repo)
  - **Documentation complÃ¨te** : Voir `CLAUDE.md` Ã  la racine du projet
  - **Game System** : Voir `GAME_SYSTEM.md` pour la documentation du systÃ¨me de jeu
}
